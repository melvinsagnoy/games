<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GameHaven - Softwares</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Lottie Player CDN -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <style>
    /* Hide scrollbar */
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }

    /* Netflix-style hover zoom */
    .netflix-card img {
      transition: transform 0.4s ease;
    }
    .netflix-card:hover img {
      transform: scale(1.15);
    }

    /* Overlay gradient */
    .card-overlay {
      background: linear-gradient(to top, rgba(0,0,0,0.85), transparent);
    }
  </style>
</head>

<body class="bg-gray-900 text-white">

<!-- LOADING OVERLAY -->
<div id="loadingOverlay" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
  <lottie-player
      src="Pokeball loading.json"
      background="transparent"
      speed="1"
      style="width: 120px; height: 120px;"
      loop
      autoplay>
  </lottie-player>
</div>

<header class="bg-gray-800 sticky top-0 z-50 shadow-md">
  <div class="container mx-auto px-6 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold tracking-wide">ðŸŽ® GameHaven</h1>

    <!-- HEADER NAVIGATION -->
    <nav>
      <ul class="flex space-x-6 text-sm font-semibold">
        <li>
          <a href="index.html" class="text-gray-400 hover:text-white border-b-2 border-transparent pb-1">
            Games
          </a>
        </li>
        <li>
          <a href="software.html" class="text-blue-400 border-b-2 border-blue-500 pb-1">
            Softwares
          </a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<!-- MAIN -->
<main class="container mx-auto px-6 py-8 space-y-12">

  <h2 class="text-3xl font-bold mb-6">ðŸ’» Softwares</h2>

  <!-- SOFTWARE GRID -->
  <div id="softwareGrid"
       class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 transition-opacity duration-500 ease-in-out opacity-0">
    <!-- Software cards injected here -->
  </div>

  <!-- Pagination -->
  <div id="pagination" class="flex flex-wrap justify-center gap-2 mt-10"></div>

</main>

<footer class="bg-gray-800 text-gray-400 text-center py-4 mt-12">
  Â© 2026 GameHaven. All rights reserved.
</footer>

<script>
let allSoftwares = [];
let filteredSoftwares = [];
let currentPage = 1;
const itemsPerPage = 24;

// Get loading overlay
const loading = document.getElementById('loadingOverlay');

// Show loading function
function showLoading() {
  loading.classList.remove('hidden');
}

// Hide loading function
function hideLoading() {
  loading.classList.add('hidden');
}

// Fetch software.json
fetch('software.json')
  .then(res => res.json())
  .then(data => {
    allSoftwares = data;
    filteredSoftwares = data;
    displaySoftwares();
    setupPagination();
  });

// Display softwares with fade + loading
function displaySoftwares() {
  const grid = document.getElementById('softwareGrid');

  // Show loading
  showLoading();

  // Fade out current grid
  grid.classList.add('opacity-0');

  setTimeout(() => {
    // Clear grid and populate
    grid.innerHTML = '';

    const start = (currentPage - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    const softwaresToShow = filteredSoftwares.slice(start, end);

    if (!softwaresToShow.length) {
      grid.innerHTML = `<p class="col-span-full text-center text-gray-400">No softwares found.</p>`;
    } else {
      softwaresToShow.forEach(software => {
        const card = document.createElement('div');
        card.className = `netflix-card relative rounded-xl overflow-hidden cursor-pointer h-[260px]`;

        card.innerHTML = `
          <a href="${software.link}" target="_blank">
            <img src="${software.image}" class="w-full h-full object-cover"/>
            <div class="absolute inset-0 card-overlay p-3 flex flex-col justify-end">
              <h3 class="text-sm font-semibold">${software.name}</h3>
            </div>
          </a>
        `;

        grid.appendChild(card);
      });
    }

    // Fade in
    grid.classList.remove('opacity-0');

    // Hide loading
    hideLoading();
  }, 500); // small delay for smooth transition
}

// Setup pagination buttons
function setupPagination() {
  const pagination = document.getElementById('pagination');
  pagination.innerHTML = '';
  const pageCount = Math.ceil(filteredSoftwares.length / itemsPerPage);
  if (pageCount <= 1) return;

  for (let i = 1; i <= pageCount; i++) {
    const btn = document.createElement('button');
    btn.textContent = i;
    btn.className = `
      px-4 py-2 rounded-lg text-sm font-semibold transition
      ${i === currentPage
        ? 'bg-blue-600 text-white'
        : 'bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white'}
    `;
    btn.addEventListener('click', () => {
      currentPage = i;
      displaySoftwares();
      setupPagination();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    pagination.appendChild(btn);
  }
}

// Show loading when clicking navigation
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', () => {
    showLoading();
  });
});
</script>

</body>
</html>
